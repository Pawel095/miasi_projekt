<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="Definitions_1eh17hb" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="4.8.1">
  <bpmn:collaboration id="Collaboration_1qkkdk0">
    <bpmn:participant id="Participant_1j0szcg" name="System do zarządzania magazynem leków" processRef="Process_11g8ru2" />
    <bpmn:participant id="Participant_0l7wgkl" name="Pacjent" processRef="Process_1vos8pi" />
  </bpmn:collaboration>
  <bpmn:process id="Process_11g8ru2" isExecutable="true">
    <bpmn:subProcess id="Activity_1bwnxy3" name="Odszukanie leków">
      <bpmn:incoming>Flow_132d371</bpmn:incoming>
      <bpmn:incoming>Flow_0leephf</bpmn:incoming>
      <bpmn:outgoing>Flow_0q6tm83</bpmn:outgoing>
      <bpmn:startEvent id="Event_03fmb5o">
        <bpmn:outgoing>Flow_1xvta7c</bpmn:outgoing>
      </bpmn:startEvent>
      <bpmn:serviceTask id="Activity_0fn058h" name="Wskaż miejsce w magazynie" camunda:type="external" camunda:topic="show_place">
        <bpmn:incoming>Flow_1aqm7ln</bpmn:incoming>
        <bpmn:outgoing>Flow_1we7l4s</bpmn:outgoing>
      </bpmn:serviceTask>
      <bpmn:endEvent id="Event_17qo1e5" name="Wskazano leki">
        <bpmn:incoming>Flow_1we7l4s</bpmn:incoming>
      </bpmn:endEvent>
      <bpmn:serviceTask id="Activity_0bees4l" name="Sprawdź dostępność leków" camunda:type="external" camunda:topic="check_availability">
        <bpmn:incoming>Flow_1xvta7c</bpmn:incoming>
        <bpmn:outgoing>Flow_1aqm7ln</bpmn:outgoing>
      </bpmn:serviceTask>
      <bpmn:boundaryEvent id="Event_0c2l1yh" name="Brak przynajmniej jednego z leków" attachedToRef="Activity_0bees4l">
        <bpmn:outgoing>Flow_00c6doh</bpmn:outgoing>
        <bpmn:errorEventDefinition id="ErrorEventDefinition_0ow34mi" errorRef="Error_1xnlghh" />
      </bpmn:boundaryEvent>
      <bpmn:sequenceFlow id="Flow_1we7l4s" sourceRef="Activity_0fn058h" targetRef="Event_17qo1e5" />
      <bpmn:sequenceFlow id="Flow_1aqm7ln" sourceRef="Activity_0bees4l" targetRef="Activity_0fn058h" />
      <bpmn:sequenceFlow id="Flow_1xvta7c" sourceRef="Event_03fmb5o" targetRef="Activity_0bees4l" />
      <bpmn:sequenceFlow id="Flow_00c6doh" sourceRef="Event_0c2l1yh" targetRef="Event_1ogiv4h" />
      <bpmn:endEvent id="Event_1ogiv4h" name="Brak leków">
        <bpmn:incoming>Flow_00c6doh</bpmn:incoming>
        <bpmn:errorEventDefinition id="ErrorEventDefinition_08pfnb9" errorRef="Error_1xnlghh" />
      </bpmn:endEvent>
    </bpmn:subProcess>
    <bpmn:sequenceFlow id="Flow_0q6tm83" sourceRef="Activity_1bwnxy3" targetRef="Activity_1t17hpw" />
    <bpmn:endEvent id="Event_0u0rnnf">
      <bpmn:incoming>Flow_1yuzwyv</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_1yuzwyv" sourceRef="Activity_1t17hpw" targetRef="Event_0u0rnnf" />
    <bpmn:startEvent id="Event_00imk57">
      <bpmn:outgoing>Flow_0ks2x33</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:userTask id="Activity_1fxz2oy" name="Kod recepty" camunda:assignee="demo">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="code" label="Kod recepty:" type="string" />
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0ks2x33</bpmn:incoming>
      <bpmn:outgoing>Flow_132d371</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:sequenceFlow id="Flow_0ks2x33" sourceRef="Event_00imk57" targetRef="Activity_1fxz2oy" />
    <bpmn:sequenceFlow id="Flow_132d371" sourceRef="Activity_1fxz2oy" targetRef="Activity_1bwnxy3" />
    <bpmn:boundaryEvent id="Event_0g2rga7" attachedToRef="Activity_1bwnxy3">
      <bpmn:outgoing>Flow_19jeplp</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_1sh9091" errorRef="Error_1xnlghh" />
    </bpmn:boundaryEvent>
    <bpmn:sequenceFlow id="Flow_19zd9mf" sourceRef="Event_08vnr22" targetRef="Event_1oj7chw" />
    <bpmn:endEvent id="Event_1oj7chw" name="Niepowodzenie">
      <bpmn:incoming>Flow_19zd9mf</bpmn:incoming>
      <bpmn:incoming>Flow_0mmh7xu</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_1wvtvs0" sourceRef="Activity_0edgffe" targetRef="Activity_19b86mn" />
    <bpmn:userTask id="Activity_19b86mn" name="Zaoferuj zamiennik" camunda:assignee="demo">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="accept" label="Czy akceptujesz zamienniki leków?" type="boolean" defaultValue="false" />
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1wvtvs0</bpmn:incoming>
      <bpmn:outgoing>Flow_0gpjy65</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:userTask id="Activity_1t17hpw" name="cdn2.">
      <bpmn:incoming>Flow_0q6tm83</bpmn:incoming>
      <bpmn:outgoing>Flow_1yuzwyv</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:sequenceFlow id="Flow_0gpjy65" sourceRef="Activity_19b86mn" targetRef="Gateway_0icnfuh" />
    <bpmn:sequenceFlow id="Flow_0mmh7xu" name="NIE" sourceRef="Gateway_0icnfuh" targetRef="Event_1oj7chw">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${accept == false}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:exclusiveGateway id="Gateway_0icnfuh">
      <bpmn:incoming>Flow_0gpjy65</bpmn:incoming>
      <bpmn:outgoing>Flow_0mmh7xu</bpmn:outgoing>
      <bpmn:outgoing>Flow_0leephf</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_0leephf" name="TAK" sourceRef="Gateway_0icnfuh" targetRef="Activity_1bwnxy3">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${accept == true}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:serviceTask id="Activity_0edgffe" name="Sprawdź czy istnieje zamiennik" camunda:type="external" camunda:topic="check_replacement">
      <bpmn:incoming>Flow_03q8ul6</bpmn:incoming>
      <bpmn:outgoing>Flow_1wvtvs0</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:boundaryEvent id="Event_08vnr22" name="Nie ma zamienników do brakujących leków" attachedToRef="Activity_0edgffe">
      <bpmn:outgoing>Flow_19zd9mf</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_0nn7xu2" errorRef="Error_1xa9cxt" />
    </bpmn:boundaryEvent>
    <bpmn:intermediateThrowEvent id="Event_0q9r1rl">
      <bpmn:incoming>Flow_19jeplp</bpmn:incoming>
      <bpmn:outgoing>Flow_03q8ul6</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_04679ll" camunda:type="external" camunda:topic="send_message" />
    </bpmn:intermediateThrowEvent>
    <bpmn:sequenceFlow id="Flow_19jeplp" sourceRef="Event_0g2rga7" targetRef="Event_0q9r1rl" />
    <bpmn:sequenceFlow id="Flow_03q8ul6" sourceRef="Event_0q9r1rl" targetRef="Activity_0edgffe" />
  </bpmn:process>
  <bpmn:process id="Process_1vos8pi" isExecutable="false" />
  <bpmn:message id="Message_1dksav8" />
  <bpmn:error id="Error_1xnlghh" name="x1" errorCode="1" camunda:errorMessage="Brak przynajmniej jednego z leków" />
  <bpmn:message id="Message_031i830" name="code" />
  <bpmn:error id="Error_1xa9cxt" name="x2" errorCode="2" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_1qkkdk0">
      <bpmndi:BPMNShape id="Participant_1j0szcg_di" bpmnElement="Participant_1j0szcg" isHorizontal="true">
        <dc:Bounds x="160" y="212" width="1512" height="988" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_132d371_di" bpmnElement="Flow_132d371">
        <di:waypoint x="430" y="520" />
        <di:waypoint x="490" y="520" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0ks2x33_di" bpmnElement="Flow_0ks2x33">
        <di:waypoint x="278" y="520" />
        <di:waypoint x="330" y="520" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1yuzwyv_di" bpmnElement="Flow_1yuzwyv">
        <di:waypoint x="1110" y="660" />
        <di:waypoint x="1146" y="660" />
        <di:waypoint x="1146" y="670" />
        <di:waypoint x="1182" y="670" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0q6tm83_di" bpmnElement="Flow_0q6tm83">
        <di:waypoint x="940" y="660" />
        <di:waypoint x="1010" y="660" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_19zd9mf_di" bpmnElement="Flow_19zd9mf">
        <di:waypoint x="1248" y="370" />
        <di:waypoint x="1432" y="370" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1wvtvs0_di" bpmnElement="Flow_1wvtvs0">
        <di:waypoint x="1230" y="410" />
        <di:waypoint x="1310" y="410" />
        <di:waypoint x="1310" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0gpjy65_di" bpmnElement="Flow_0gpjy65">
        <di:waypoint x="1310" y="520" />
        <di:waypoint x="1310" y="545" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0mmh7xu_di" bpmnElement="Flow_0mmh7xu">
        <di:waypoint x="1335" y="570" />
        <di:waypoint x="1450" y="570" />
        <di:waypoint x="1450" y="388" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1383" y="552" width="19" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0leephf_di" bpmnElement="Flow_0leephf">
        <di:waypoint x="1285" y="570" />
        <di:waypoint x="940" y="570" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1219" y="552" width="21" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_19jeplp_di" bpmnElement="Flow_19jeplp">
        <di:waypoint x="958" y="410" />
        <di:waypoint x="1022" y="410" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_03q8ul6_di" bpmnElement="Flow_03q8ul6">
        <di:waypoint x="1058" y="410" />
        <di:waypoint x="1130" y="410" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Event_1oj7chw_di" bpmnElement="Event_1oj7chw">
        <dc:Bounds x="1432" y="352" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1412" y="328" width="76" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_19b86mn_di" bpmnElement="Activity_19b86mn">
        <dc:Bounds x="1260" y="440" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0eb2ha4_di" bpmnElement="Activity_1t17hpw">
        <dc:Bounds x="1010" y="620" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0icnfuh_di" bpmnElement="Gateway_0icnfuh" isMarkerVisible="true">
        <dc:Bounds x="1285" y="545" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0cxt34u_di" bpmnElement="Activity_0edgffe">
        <dc:Bounds x="1130" y="370" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0j79ym4_di" bpmnElement="Event_0q9r1rl">
        <dc:Bounds x="1022" y="392" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1bwnxy3_di" bpmnElement="Activity_1bwnxy3" isExpanded="true">
        <dc:Bounds x="490" y="340" width="450" height="430" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_00c6doh_di" bpmnElement="Flow_00c6doh">
        <di:waypoint x="728" y="460" />
        <di:waypoint x="830" y="460" />
        <di:waypoint x="830" y="502" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1xvta7c_di" bpmnElement="Flow_1xvta7c">
        <di:waypoint x="558" y="500" />
        <di:waypoint x="610" y="500" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1aqm7ln_di" bpmnElement="Flow_1aqm7ln">
        <di:waypoint x="660" y="540" />
        <di:waypoint x="660" y="590" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1we7l4s_di" bpmnElement="Flow_1we7l4s">
        <di:waypoint x="710" y="630" />
        <di:waypoint x="812" y="630" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Event_03fmb5o_di" bpmnElement="Event_03fmb5o">
        <dc:Bounds x="522" y="482" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0fn058h_di" bpmnElement="Activity_0fn058h">
        <dc:Bounds x="610" y="590" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_17qo1e5_di" bpmnElement="Event_17qo1e5">
        <dc:Bounds x="812" y="612" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="795" y="655" width="71" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0bees4l_di" bpmnElement="Activity_0bees4l">
        <dc:Bounds x="610" y="460" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_02k4l5v_di" bpmnElement="Event_1ogiv4h">
        <dc:Bounds x="812" y="502" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="803" y="545" width="55" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0c2l1yh_di" bpmnElement="Event_0c2l1yh">
        <dc:Bounds x="692" y="442" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="666" y="404.5" width="88" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0u0rnnf_di" bpmnElement="Event_0u0rnnf">
        <dc:Bounds x="1182" y="652" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_00imk57_di" bpmnElement="Event_00imk57">
        <dc:Bounds x="242" y="502" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1fxz2oy_di" bpmnElement="Activity_1fxz2oy">
        <dc:Bounds x="330" y="480" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1466qgh_di" bpmnElement="Event_0g2rga7">
        <dc:Bounds x="922" y="392" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0dcn28r_di" bpmnElement="Event_08vnr22">
        <dc:Bounds x="1212" y="352" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1191" y="288.5" width="78" height="53" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Participant_0l7wgkl_di" bpmnElement="Participant_0l7wgkl" isHorizontal="true">
        <dc:Bounds x="160" y="80" width="1512" height="150" />
      </bpmndi:BPMNShape>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
